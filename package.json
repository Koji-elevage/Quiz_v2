{
  "name": "nihongo-quiz",
  "version": "1.0.0",
  "private": true,
  "description": "授業連動型 日本語クイズアプリ",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "node server.js",
    "dev:lts": "npx -y node@22 server.js",
    "dev:lts:prepare": "npx -y node@22 /usr/local/lib/node_modules/npm/bin/npm-cli.js rebuild better-sqlite3",
    "dev:daemon": "sh -c 'if npx -y pm2 describe quizv2-dev >/dev/null 2>&1; then npx -y pm2 restart quizv2-dev --update-env; else npx -y pm2 start server.js --name quizv2-dev --update-env; fi; npx -y pm2 save >/dev/null 2>&1 || true; npx -y pm2 status quizv2-dev'",
    "dev:lts:daemon": "sh -c 'if [ -f /tmp/quizv2-lts.pid ] && ps -p $(cat /tmp/quizv2-lts.pid) >/dev/null 2>&1; then echo \"already running pid=$(cat /tmp/quizv2-lts.pid)\"; exit 0; fi; rm -f /tmp/quizv2-lts.pid; nohup npx -y node@22 server.js >/tmp/quizv2-lts.log 2>&1 & echo $! >/tmp/quizv2-lts.pid; sleep 2; if ps -p $(cat /tmp/quizv2-lts.pid) >/dev/null 2>&1; then echo \"started pid=$(cat /tmp/quizv2-lts.pid)\"; else echo \"failed to start\"; tail -n 80 /tmp/quizv2-lts.log; exit 1; fi'",
    "dev:stop": "sh -c 'npx -y pm2 delete quizv2-dev >/dev/null 2>&1 || true; if [ -f /tmp/quizv2.pid ]; then PID=$(cat /tmp/quizv2.pid); if ps -p $PID >/dev/null 2>&1; then kill $PID 2>/dev/null || true; fi; rm -f /tmp/quizv2.pid; fi; PIDS=$(lsof -tiTCP:3000 -sTCP:LISTEN 2>/dev/null || true); if [ -n \"$PIDS\" ]; then kill $PIDS 2>/dev/null || true; fi; echo \"stopped\"'",
    "dev:lts:stop": "sh -c 'if [ -f /tmp/quizv2-lts.pid ]; then PID=$(cat /tmp/quizv2-lts.pid); if ps -p $PID >/dev/null 2>&1; then kill $PID 2>/dev/null || true; fi; rm -f /tmp/quizv2-lts.pid; fi; PIDS=$(lsof -tiTCP:3000 -sTCP:LISTEN 2>/dev/null || true); if [ -n \"$PIDS\" ]; then kill $PIDS 2>/dev/null || true; fi; echo \"stopped lts\"'",
    "dev:status": "sh -c 'npx -y pm2 status quizv2-dev || true; echo \"----\"; lsof -nP -iTCP:3000 -sTCP:LISTEN || true'",
    "dev:lts:status": "sh -c 'PID=none; if [ -f /tmp/quizv2-lts.pid ]; then PID=$(cat /tmp/quizv2-lts.pid); if ! ps -p $PID >/dev/null 2>&1; then echo \"pidfile=stale($PID)\"; rm -f /tmp/quizv2-lts.pid; PID=none; fi; fi; echo \"lts pidfile=$PID\"; lsof -nP -iTCP:3000 -sTCP:LISTEN || true'",
    "dev:pm2:start": "npx -y pm2 start server.js --name quizv2-dev --update-env",
    "dev:pm2:restart": "npx -y pm2 restart quizv2-dev --update-env",
    "dev:pm2:stop": "npx -y pm2 stop quizv2-dev",
    "dev:pm2:delete": "npx -y pm2 delete quizv2-dev",
    "dev:pm2:status": "npx -y pm2 status quizv2-dev",
    "dev:pm2:logs": "npx -y pm2 logs quizv2-dev --lines 100",
    "test:e2e": "node tests/e2e-smoke.js",
    "migrate:to-cloud": "node scripts/migrate-sqlite-to-cloud.js"
  },
  "dependencies": {
    "@google/genai": "^1.42.0",
    "better-sqlite3": "^12.6.2",
    "dotenv": "^17.3.1",
    "express": "^4.21.2",
    "google-auth-library": "^10.6.1",
    "js-yaml": "^4.1.1",
    "multer": "^2.0.2",
    "mysql2": "^3.15.2",
    "qrcode": "^1.5.4",
    "sharp": "^0.34.5"
  },
  "devDependencies": {
    "playwright": "^1.58.2"
  }
}
