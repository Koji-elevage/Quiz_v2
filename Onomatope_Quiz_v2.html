<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚ªãƒãƒãƒˆãƒšã‚¯ã‚¤ã‚º - ç©´åŸ‹ã‚å•é¡Œç‰ˆ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #4A90E2;
            --primary-blue-dark: #357ABD;
            --success: #2ECC71;
            --error: #E74C3C;
            --warning: #F39C12;
            --bg-primary: #FAFAFA;
            --bg-card: #FFFFFF;
            --text-primary: #2C3E50;
            --text-secondary: #7F8C8D;
            --border: #ECF0F1;
            --romanization: #9B59B6;
            --hint-gem: #F1C40F;
            --blank-bg: #E8F4FD;
            --blank-border: #4A90E2;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .phone-frame {
            width: 375px;
            height: 812px;
            background: var(--bg-primary);
            border-radius: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            border: 12px solid #1a1a2e;
        }

        .phone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 30px;
            background: #1a1a2e;
            border-radius: 0 0 20px 20px;
            z-index: 100;
        }

        .screen {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Header */
        .header {
            padding: 50px 16px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
        }

        .header-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .lang-switch {
            background: var(--border);
            padding: 4px 10px;
            border-radius: 16px;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .lang-switch:hover {
            background: var(--primary-blue);
            color: white;
        }

        .back-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-primary);
            padding: 4px;
        }

        /* Progress Bar */
        .progress-header {
            padding: 8px 16px;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
        }

        .progress-bar-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .progress-bar {
            flex: 1;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-blue), #6dd5fa);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
            min-width: 50px;
        }

        /* Content */
        .content {
            flex: 1;
            padding: 12px;
            overflow-y: auto;
        }

        /* Quiz Header */
        .quiz-header {
            padding: 50px 16px 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
        }

        .quiz-progress {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .quiz-timer {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 600;
            color: var(--warning);
        }

        /* Question */
        .question-text {
            text-align: center;
            font-size: 15px;
            font-weight: 700;
            color: var(--text-primary);
            padding: 12px 8px 8px;
            flex-shrink: 0;
        }

        .question-image-container {
            padding: 0 12px 8px;
            flex-shrink: 0;
        }

        .question-image {
            width: 100%;
            height: 130px;
            object-fit: cover;
            border-radius: 12px;
        }

        /* Fill-in-the-blank Sentence */
        .sentence-container {
            padding: 10px 12px 8px;
            flex-shrink: 0;
        }

        .sentence-card {
            background: linear-gradient(135deg, #E8F4FD 0%, #D4E6F1 100%);
            border: 2px solid var(--primary-blue);
            border-radius: 12px;
            padding: 14px;
        }

        .sentence-label {
            font-size: 10px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .sentence-text {
            font-size: 13px;
            line-height: 1.8;
            color: var(--text-primary);
        }

        .blank-space {
            display: inline-block;
            min-width: 80px;
            padding: 2px 8px;
            background: var(--bg-card);
            border: 2px dashed var(--blank-border);
            border-radius: 6px;
            text-align: center;
            font-weight: 700;
            color: var(--primary-blue);
            cursor: pointer;
            transition: all 0.2s;
            margin: 0 4px;
        }

        .blank-space:hover {
            background: var(--blank-border);
            color: white;
        }

        .blank-space.revealed {
            background: var(--success);
            border-color: var(--success);
            color: white;
            border-style: solid;
        }

        .blank-hint {
            font-size: 9px;
            color: var(--text-secondary);
            margin-top: 6px;
            text-align: center;
        }

        .reveal-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
            width: 100%;
            transition: all 0.2s;
        }

        .reveal-btn:hover {
            background: var(--primary-blue-dark);
        }

        .reveal-btn:disabled {
            background: var(--border);
            cursor: not-allowed;
        }

        /* Options - Compact */
        .options-container {
            padding: 0 12px 8px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            flex-shrink: 0;
        }

        .option-btn {
            background: var(--bg-card);
            border: 2px solid var(--border);
            padding: 12px 10px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            text-align: center;
        }

        .option-btn:hover {
            border-color: var(--primary-blue);
            background: #E8F4FD;
        }

        .option-btn.selected {
            border-color: var(--primary-blue);
            background: #E8F4FD;
        }

        .option-btn.correct {
            border-color: var(--success);
            background: #E8F8EF;
            color: #27AE60;
        }

        .option-btn.incorrect {
            border-color: var(--error);
            background: #FDEDEC;
            color: #C0392B;
        }

        .option-letter {
            font-size: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .option-word {
            font-size: 15px;
            font-weight: 700;
        }

        .hint-btn {
            background: none;
            border: none;
            padding: 8px 12px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 4px;
            cursor: pointer;
            color: var(--warning);
            font-size: 12px;
            font-weight: 500;
            flex-shrink: 0;
        }

        /* Feedback Screen */
        .feedback-content {
            padding: 12px;
            overflow-y: auto;
            flex: 1;
        }

        .feedback-header {
            text-align: center;
            margin-bottom: 12px;
            flex-shrink: 0;
        }

        .feedback-emoji {
            font-size: 48px;
            margin-bottom: 8px;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        .feedback-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .feedback-title.correct {
            color: var(--success);
        }

        .feedback-title.incorrect {
            color: var(--error);
        }

        .feedback-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Compact Cards */
        .feedback-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .feedback-word {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
            text-align: center;
        }

        .feedback-roman {
            color: var(--romanization);
            font-size: 13px;
            font-weight: 500;
            text-align: center;
            margin-bottom: 10px;
        }

        /* Complete Sentence Display */
        .complete-sentence {
            background: linear-gradient(135deg, #E8F8EF 0%, #D5F5E3 100%);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 10px;
        }

        .complete-sentence-label {
            font-size: 10px;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 6px;
        }

        .complete-sentence-text {
            font-size: 13px;
            line-height: 1.8;
            color: var(--text-primary);
        }

        .filled-word {
            display: inline-block;
            padding: 2px 8px;
            background: var(--success);
            color: white;
            border-radius: 6px;
            font-weight: 700;
            margin: 0 4px;
        }

        /* Tabs for Content */
        .tabs-container {
            display: flex;
            gap: 6px;
            margin-bottom: 10px;
            flex-shrink: 0;
        }

        .tab-btn {
            flex: 1;
            background: var(--bg-card);
            border: 2px solid var(--border);
            padding: 8px 6px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab-btn.active {
            background: var(--primary-blue);
            border-color: var(--primary-blue);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Why Correct - Compact */
        .why-correct-section {
            background: linear-gradient(135deg, #E8F8EF 0%, #D5F5E3 100%);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .section-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .explanation-text {
            font-size: 12px;
            color: var(--text-primary);
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .key-points {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
        }

        .key-point {
            background: white;
            padding: 6px 8px;
            border-radius: 6px;
            font-size: 11px;
        }

        .key-point-label {
            font-size: 9px;
            color: var(--text-secondary);
            margin-bottom: 2px;
        }

        .key-point-value {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Other Options - Compact */
        .option-detail-card {
            background: var(--bg-primary);
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 8px;
            border-left: 3px solid var(--error);
        }

        .option-detail-card:last-child {
            margin-bottom: 0;
        }

        .option-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .option-detail-word {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .option-detail-roman {
            color: var(--romanization);
            font-size: 10px;
        }

        .option-detail-usage {
            font-size: 11px;
            color: var(--text-primary);
            line-height: 1.5;
            margin-bottom: 4px;
        }

        .option-detail-example {
            background: white;
            padding: 6px 8px;
            border-radius: 6px;
            font-size: 10px;
            color: var(--text-secondary);
            border-left: 2px solid var(--border);
        }

        /* Intensity Scale - Compact */
        .intensity-section {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .intensity-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
            text-align: center;
        }

        .intensity-scale {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 0;
        }

        .intensity-bar {
            flex: 1;
            height: 8px;
            background: linear-gradient(90deg, #AED6F1, #5DADE2, #2E86C1, #1B4F72);
            border-radius: 4px;
            position: relative;
        }

        .intensity-words {
            display: flex;
            justify-content: space-between;
            margin-top: 6px;
            padding-top: 8px;
            border-top: 1px solid var(--border);
        }

        .intensity-word {
            text-align: center;
            flex: 1;
        }

        .intensity-word-text {
            font-size: 11px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .intensity-word-desc {
            font-size: 8px;
            color: var(--text-secondary);
        }

        /* Comparison Table - Compact */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 10px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 6px 4px;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        .comparison-table th {
            background: var(--bg-primary);
            font-weight: 700;
            color: var(--text-secondary);
            font-size: 9px;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        /* Tip Box - Compact */
        .tip-box {
            background: linear-gradient(135deg, #FEF9E7 0%, #FDEBD0 100%);
            border: 2px solid var(--warning);
            border-radius: 10px;
            padding: 10px;
            margin-top: 10px;
        }

        .tip-title {
            font-size: 11px;
            font-weight: 700;
            color: var(--warning);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .tip-text {
            font-size: 10px;
            color: var(--text-primary);
            line-height: 1.5;
        }

        /* Expand Button */
        .expand-btn {
            background: none;
            border: none;
            color: var(--primary-blue);
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            padding: 6px;
            width: 100%;
            margin-top: 6px;
        }

        .expand-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .expand-content.expanded {
            max-height: 300px;
        }

        .expand-icon {
            transition: transform 0.3s ease;
        }

        .expand-btn.expanded .expand-icon {
            transform: rotate(180deg);
        }

        /* Next Button Container */
        .next-btn-container {
            padding: 10px 12px;
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            flex-shrink: 0;
        }

        .primary-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .primary-btn:hover {
            background: var(--primary-blue-dark);
            transform: scale(1.02);
        }

        .primary-btn:active {
            transform: scale(0.98);
        }

        /* Tab Bar */
        .tab-bar {
            display: flex;
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            padding: 8px 0;
            flex-shrink: 0;
        }

        .tab-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            padding: 6px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .tab-item.active {
            color: var(--primary-blue);
        }

        .tab-icon {
            font-size: 20px;
        }

        .tab-label {
            font-size: 10px;
            font-weight: 500;
        }

        /* Confetti */
        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--success);
            animation: confetti-fall 1.5s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(800px) rotate(720deg);
                opacity: 0;
            }
        }

        /* Screen Indicator */
        .screen-indicator {
            position: absolute;
            top: 16px;
            right: 16px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 500;
            z-index: 50;
        }

        /* Results Screen */
        .results-content {
            padding: 20px 16px;
            overflow-y: auto;
            text-align: center;
        }

        .results-emoji {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .results-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .results-score {
            font-size: 48px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 8px;
        }

        .results-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .results-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .review-list {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 20px;
            text-align: left;
        }

        .review-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .review-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 12px;
        }

        .review-item:last-child {
            border-bottom: none;
        }

        .review-word {
            font-weight: 600;
            color: var(--text-primary);
        }

        .review-status {
            color: var(--error);
            font-size: 11px;
        }

        /* Home Screen */
        .mission-card {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 14px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .mission-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .mission-text {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .progress-bar-sm {
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill-sm {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-blue), #6dd5fa);
            border-radius: 3px;
        }

        .mission-cta {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .mission-cta:hover {
            background: var(--primary-blue-dark);
        }

        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 20px 16px;
            text-align: center;
            margin-bottom: 12px;
            color: white;
        }

        .hero-emoji {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .hero-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .hero-subtitle {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 14px;
        }

        .footer-stats {
            padding: 10px 12px;
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .stat-value {
            color: var(--text-primary);
            font-weight: 700;
        }

        /* Navigation Dots */
        .nav-dots {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
            z-index: 50;
        }

        .nav-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-dot.active {
            background: white;
            width: 18px;
            border-radius: 3px;
        }

        /* Scrollbar */
        .content::-webkit-scrollbar,
        .feedback-content::-webkit-scrollbar {
            width: 4px;
        }

        .content::-webkit-scrollbar-thumb,
        .feedback-content::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 2px;
        }

        /* Additional Example Sentences */
        .example-sentences {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 12px;
            margin-top: 10px;
        }

        .example-title {
            font-size: 11px;
            font-weight: 700;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .example-item {
            font-size: 11px;
            color: var(--text-primary);
            line-height: 1.6;
            padding: 6px 0;
            border-bottom: 1px dashed var(--border);
        }

        .example-item:last-child {
            border-bottom: none;
        }

        .example-highlight {
            color: var(--primary-blue);
            font-weight: 700;
        }
    </style>
</head>

<body>
    <div class="phone-frame">
        <div class="phone-notch"></div>
        <div class="screen-indicator" id="screenIndicator">1/4</div>

        <!-- Screen 1: Home -->
        <div class="screen active" id="homeScreen">
            <div class="header">
                <div class="header-title">ğŸŒ ã‚ªãƒãƒãƒˆãƒšã‚¯ã‚¤ã‚º</div>
                <div class="lang-switch">ğŸŒ EN</div>
            </div>

            <div class="content">
                <div class="mission-card">
                    <div class="mission-title">ğŸ¯ ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³</div>
                    <div class="mission-text">10 å•ã™ã¹ã¦æ­£è§£ã—ã‚ˆã†ï¼</div>
                    <div class="progress-bar-sm">
                        <div class="progress-fill-sm" id="missionProgress" style="width: 0%"></div>
                    </div>
                    <button class="mission-cta" onclick="startQuiz()">â–¶ï¸ ã‚¯ã‚¤ã‚ºã‚¹ã‚¿ãƒ¼ãƒˆ</button>
                </div>

                <div class="hero-section">
                    <div class="hero-emoji">ğŸ¨âœ¨ğŸ“ğŸ“š</div>
                    <div class="hero-title">ç©´åŸ‹ã‚å•é¡Œã§<br>ã‚ªãƒãƒãƒˆãƒšã‚’ãƒã‚¹ã‚¿ãƒ¼ï¼</div>
                    <div class="hero-subtitle">ä¾‹æ–‡ã§ä½¿ã„æ–¹ã‚’è‡ªç„¶ã«è¦šãˆã‚ˆã†</div>
                    <button class="primary-btn" onclick="startQuiz()">â–¶ï¸ ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹</button>
                </div>
            </div>

            <div class="footer-stats">
                <div class="stat-item">ğŸ† ãƒ™ã‚¹ãƒˆï¼š<span class="stat-value" id="homeBestScore">0 ç‚¹</span></div>
                <div class="stat-item">ğŸ’ <span class="stat-value" id="homeGems">12</span></div>
            </div>

            <div class="tab-bar">
                <div class="tab-item active">
                    <div class="tab-icon">ğŸ </div>
                    <div class="tab-label">ãƒ›ãƒ¼ãƒ </div>
                </div>
                <div class="tab-item">
                    <div class="tab-icon">ğŸ—‚ï¸</div>
                    <div class="tab-label">å›³é‘‘</div>
                </div>
                <div class="tab-item">
                    <div class="tab-icon">ğŸ“ˆ</div>
                    <div class="tab-label">é€²æ—</div>
                </div>
                <div class="tab-item">
                    <div class="tab-icon">âš™ï¸</div>
                    <div class="tab-label">è¨­å®š</div>
                </div>
            </div>
        </div>

        <!-- Screen 2: Quiz -->
        <div class="screen" id="quizScreen">
            <div class="quiz-header">
                <button class="back-btn" onclick="goToScreen('homeScreen')">â†</button>
                <div class="quiz-progress" id="quizProgress">Q1/10</div>
                <div class="quiz-timer">â±ï¸ <span id="timer">00:30</span></div>
            </div>

            <div class="progress-header">
                <div class="progress-bar-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="quizProgressBar" style="width: 10%"></div>
                    </div>
                    <div class="progress-text" id="quizProgressText">1/10</div>
                </div>
            </div>

            <div class="question-text" id="questionText">ã€ã“ã®çŠ¶æ³ã«åˆã†è¨€è‘‰ã¯ï¼Ÿã€‘</div>

            <div class="question-image-container">
                <img src="" alt="Question image" class="question-image" id="questionImage">
            </div>

            <!-- Fill-in-the-blank Sentence -->
            <div class="sentence-container">
                <div class="sentence-card">
                    <div class="sentence-label">ğŸ“ ä¾‹æ–‡ç©´åŸ‹ã‚</div>
                    <div class="sentence-text" id="sentenceText">
                        <!-- Dynamically generated -->
                    </div>
                    <div class="blank-hint">ğŸ’¡ ç©ºæ¬„ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ç­”ãˆã‚’ç¢ºèª</div>
                    <button class="reveal-btn" id="revealBtn" onclick="revealAnswer()">ç­”ãˆã‚’è¡¨ç¤º</button>
                </div>
            </div>

            <div class="options-container" id="optionsContainer">
                <!-- Options will be generated dynamically -->
            </div>

            <button class="hint-btn">ğŸ’¡ ãƒ’ãƒ³ãƒˆ [ğŸ’3] â†’</button>
        </div>

        <!-- Screen 3: Feedback -->
        <div class="screen" id="feedbackScreen">
            <div class="quiz-header">
                <button class="back-btn" onclick="goToScreen('quizScreen')">â†</button>
                <div class="quiz-progress" id="feedbackProgress">Q1/10</div>
                <div class="quiz-timer">ğŸ’ <span id="feedbackGems">12</span></div>
            </div>

            <div class="feedback-content">
                <div class="feedback-header">
                    <div class="feedback-emoji" id="feedbackEmoji">ğŸ‰</div>
                    <div class="feedback-title correct" id="feedbackTitle">æ­£è§£ï¼</div>
                    <div class="feedback-subtitle" id="feedbackSubtitle">ç´ æ™´ã‚‰ã—ã„ï¼ã“ã®èª¿å­ã§ç¶šã‘ã¾ã—ã‚‡ã†</div>
                </div>

                <div class="feedback-card">
                    <div class="feedback-word" id="feedbackWord">âœ¨ ã—ã¨ã—ã¨</div>
                    <div class="feedback-roman" id="feedbackRoman">[shi-to-shi-to]</div>
                </div>

                <!-- Complete Sentence -->
                <div class="complete-sentence">
                    <div class="complete-sentence-label">âœ… å®Œæˆã—ãŸä¾‹æ–‡</div>
                    <div class="complete-sentence-text" id="completeSentence">
                        <!-- Dynamically generated -->
                    </div>
                </div>

                <!-- Tabs for Content -->
                <div class="tabs-container">
                    <button class="tab-btn active" onclick="switchTab('why')">âœ… æ­£è§£ç†ç”±</button>
                    <button class="tab-btn" onclick="switchTab('other')">ğŸ” ä»–ã®é¸æŠè‚¢</button>
                    <button class="tab-btn" onclick="switchTab('examples')">ğŸ“š ä¾‹æ–‡</button>
                </div>

                <!-- Tab 1: Why Correct -->
                <div class="tab-content active" id="tab-why">
                    <div class="why-correct-section">
                        <div class="section-title">âœ… ãªãœã“ã‚ŒãŒæ­£è§£ï¼Ÿ</div>
                        <div class="explanation-text" id="whyExplanation">
                            ç”»åƒã«ã¯ã€Œå°é›¨ãŒé™ã‹ã«é™ã‚Šç¶šã‘ã¦ã„ã‚‹æ§˜å­ã€ãŒæã‹ã‚Œã¦ã„ã¾ã™ã€‚
                        </div>
                        <div class="key-points" id="whyKeyPoints">
                            <div class="key-point">
                                <div class="key-point-label">å¼·ã•</div>
                                <div class="key-point-value">å¼±ã€œä¸­</div>
                            </div>
                            <div class="key-point">
                                <div class="key-point-label">éŸ³</div>
                                <div class="key-point-value">é™ã‹</div>
                            </div>
                            <div class="key-point">
                                <div class="key-point-label">æ™‚é–“</div>
                                <div class="key-point-value">é•·ã„</div>
                            </div>
                            <div class="key-point">
                                <div class="key-point-label">é›°å›²æ°—</div>
                                <div class="key-point-value">ç©ã‚„ã‹</div>
                            </div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <div class="tip-title">ğŸ’¡ è¨˜æ†¶ãƒ’ãƒ³ãƒˆ</div>
                        <div class="tip-text" id="memoryTip">
                            ã€Œã—ã¨ã—ã¨ã€=ã€Œé™ (shizuka)ã€ã¨éŸ³ãŒä¼¼ã¦ã„ã¾ã™ã­ï¼
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Other Options -->
                <div class="tab-content" id="tab-other">
                    <div class="feedback-card">
                        <div class="section-title" style="color: var(--text-secondary); margin-bottom: 10px;">ğŸ”
                            ä»–ã®é¸æŠè‚¢ã®ä½¿ã„æ–¹</div>
                        <div id="otherOptionsContent">
                            <!-- Dynamically generated -->
                        </div>
                    </div>
                </div>

                <!-- Tab 3: More Examples -->
                <div class="tab-content" id="tab-examples">
                    <div class="example-sentences" id="exampleSentencesContent">
                        <div class="example-title">ğŸ“š ã•ã‚‰ã«ä¾‹æ–‡</div>
                        <!-- Dynamically generated -->
                    </div>
                </div>
            </div>

            <div class="next-btn-container">
                <button class="primary-btn" id="nextBtn" onclick="nextQuestion()">
                    â–¶ï¸ æ¬¡ã®å•é¡Œã¸
                </button>
            </div>
        </div>

        <!-- Screen 4: Results -->
        <div class="screen" id="resultsScreen">
            <div class="quiz-header">
                <button class="back-btn" onclick="goToScreen('homeScreen')">â†</button>
                <div class="quiz-progress">çµæœ</div>
                <div class="quiz-timer">ğŸ’ <span id="resultGems">12</span></div>
            </div>

            <div class="results-content">
                <div class="results-emoji" id="resultsEmoji">ğŸ†</div>
                <div class="results-title" id="resultsTitle">ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</div>
                <div class="results-score" id="resultsScore">8/10</div>
                <div class="results-subtitle" id="resultsSubtitle">æ­£è§£ç‡ 80% - ç´ æ™´ã‚‰ã—ã„ï¼</div>

                <div class="results-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="statCorrect">8</div>
                        <div class="stat-label">æ­£è§£æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statScore">800</div>
                        <div class="stat-label">ç²å¾—ã‚¹ã‚³ã‚¢</div>
                    </div>
                </div>

                <div class="review-list">
                    <div class="review-title">ğŸ” å¾©ç¿’ãŠã™ã™ã‚å˜èª</div>
                    <div id="reviewListContent">
                        <div class="review-item">
                            <span class="review-word">ã˜ã‚ƒã‚ã˜ã‚ƒã‚</span>
                            <span class="review-status">âŒ ä¸æ­£è§£</span>
                        </div>
                        <div class="review-item">
                            <span class="review-word">ã«ã“ã«ã“</span>
                            <span class="review-status">âŒ ä¸æ­£è§£</span>
                        </div>
                    </div>
                </div>

                <button class="primary-btn" onclick="startQuiz()" style="margin-bottom: 10px;">
                    ğŸ”„ ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦
                </button>
                <button class="mission-cta" onclick="goToScreen('homeScreen')" style="width: 100%;">
                    ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
                </button>
            </div>

            <div class="tab-bar">
                <div class="tab-item" onclick="goToScreen('homeScreen')">
                    <div class="tab-icon">ğŸ </div>
                    <div class="tab-label">ãƒ›ãƒ¼ãƒ </div>
                </div>
                <div class="tab-item">
                    <div class="tab-icon">ğŸ—‚ï¸</div>
                    <div class="tab-label">å›³é‘‘</div>
                </div>
                <div class="tab-item active">
                    <div class="tab-icon">ğŸ“ˆ</div>
                    <div class="tab-label">é€²æ—</div>
                </div>
                <div class="tab-item">
                    <div class="tab-icon">âš™ï¸</div>
                    <div class="tab-label">è¨­å®š</div>
                </div>
            </div>
        </div>

        <!-- Navigation Dots -->
        <div class="nav-dots">
            <div class="nav-dot active" onclick="goToScreen('homeScreen')"></div>
            <div class="nav-dot" onclick="goToScreen('quizScreen')"></div>
            <div class="nav-dot" onclick="goToScreen('feedbackScreen')"></div>
            <div class="nav-dot" onclick="goToScreen('resultsScreen')"></div>
        </div>
    </div>

    <script>
        // 10 Questions Data with Fill-in-the-blank Sentences
        const questions = [
            {
                id: 1,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€ã“ã®é›¨ã®çŠ¶æ³ã«åˆã†è¨€è‘‰ã¯ï¼Ÿã€‘",
                correct: "ã—ã¨ã—ã¨",
                roman: "shi-to-shi-to",
                options: ["ã–ã‚ã–ã‚", "ã—ã¨ã—ã¨", "ã½ã¤ã½ã¤", "ã˜ã‚ƒã‚ã˜ã‚ƒã‚"],
                sentence: "æ¢…é›¨ã®æœã€çª“ã®å¤–ã§ã¯é›¨ãŒï¼ˆã€€ã€€ï¼‰ã¨é™ã‚Šç¶šã‘ã¦ã„ãŸã€‚",
                sentenceHint: "å°é›¨ãŒé™ã‹ã«ç¶šãæ§˜å­",
                why: "ã€Œã—ã¨ã—ã¨ã€ã¯ã€é›¨éŸ³ãŒã‚ã¾ã‚Šå¤§ãããªãã€ç©ã‚„ã‹ã«ç¶™ç¶šçš„ã«é™ã‚‹é›¨ã‚’è¡¨ç¾ã—ã¾ã™ã€‚æ¢…é›¨ã®é•·ã„å°é›¨ã«ã´ã£ãŸã‚Šã§ã™ã€‚",
                keyPoints: { strength: "å¼±ã€œä¸­", sound: "é™ã‹", duration: "é•·ã„", mood: "ç©ã‚„ã‹" },
                memoryTip: "ã€Œã—ã¨ã—ã¨ã€=ã€Œé™ (shizuka)ã€ã¨éŸ³ãŒä¼¼ã¦ã„ã¾ã™ï¼",
                others: [
                    { word: "ã–ã‚ã–ã‚", roman: "za-a-za-a", usage: "å¤§é›¨ãŒæ¿€ã—ãé™ã£ã¦ã„ã‚‹æ™‚", example: "ã€Œçªç„¶ã€é›¨ãŒã–ã‚ã–ã‚é™ã‚Šå§‹ã‚ãŸã€" },
                    { word: "ã½ã¤ã½ã¤", roman: "po-tsu-po-tsu", usage: "é›¨ãŒé™ã‚Šå§‹ã‚ãŸç¬é–“ã€é›¨ç²’ãŒã¾ã°ã‚‰", example: "ã€Œã‚ã€ã½ã¤ã½ã¤é™ã£ã¦ããŸã­ã€" },
                    { word: "ã˜ã‚ƒã‚ã˜ã‚ƒã‚", roman: "ja-a-ja-a", usage: "æ°´ãŒå¤§é‡ã«æµã‚Œå‡ºã‚‹æ™‚", example: "ã€Œæ°´é“ã‹ã‚‰ã˜ã‚ƒã‚ã˜ã‚ƒã‚æ°´ãŒå‡ºã¦ã„ã‚‹ã€" }
                ],
                moreExamples: [
                    "ç¥–æ¯ã¯ï¼ˆã—ã¨ã—ã¨ï¼‰é™ã‚‹é›¨ã‚’è¦‹ãªãŒã‚‰ã€ãŠèŒ¶ã‚’é£²ã‚“ã§ã„ãŸã€‚",
                    "ï¼ˆã—ã¨ã—ã¨ï¼‰é›¨ã®æ—¥ã¯ã€å®¶ã§æœ¬ã‚’èª­ã‚€ã®ãŒå¥½ãã ã€‚",
                    "åº­ã®èŠ±ãŒï¼ˆã—ã¨ã—ã¨ï¼‰é›¨ã«æ¿¡ã‚Œã¦ã€ãã‚Œã„ã ã£ãŸã€‚"
                ]
            },
            {
                id: 2,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€çŒ«ã®æ­©ãæ–¹ã¯ï¼Ÿã€‘",
                correct: "ã®ã—ã®ã—",
                roman: "no-shi-no-shi",
                options: ["ã®ã—ã®ã—", "ã¦ãã¦ã", "ã™ã„ã™ã„", "ã‚ˆã‚ã‚ˆã‚"],
                sentence: "å¤§ããªé»’çŒ«ãŒåº­ã‚’ï¼ˆã€€ã€€ï¼‰ã¨æ­©ã„ã¦ã„ãŸã€‚",
                sentenceHint: "å ‚ã€…ã¨å¤§ããæ­©ãæ§˜å­",
                why: "ã€Œã®ã—ã®ã—ã€ã¯ã€å¤§ããå ‚ã€…ã¨æ­©ãæ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚çŒ«ãŒè‡ªä¿¡ã‚ã‚Šã’ã«æ­©ã„ã¦ã„ã‚‹æ™‚ã«ä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "å¤§ãã„", sound: "è¶³éŸ³", duration: "ç¶™ç¶š", mood: "å ‚ã€…" },
                memoryTip: "ã€Œã®ã—ã€ã¯ã€Œä¼¸ã™ã€â†’ è¶³ã‚’ä¼¸ã°ã—ã¦æ­©ãã‚¤ãƒ¡ãƒ¼ã‚¸ï¼",
                others: [
                    { word: "ã¦ãã¦ã", roman: "te-ku-te-ku", usage: "ã‚³ãƒ„ã‚³ãƒ„ã¨æ­©ãæ§˜å­", example: "ã€Œã¦ãã¦ãæ­©ã„ã¦å¸°ã‚‹ã€" },
                    { word: "ã™ã„ã™ã„", roman: "su-i-su-i", usage: "è»½ã‚„ã‹ã«é€²ã‚€", example: "ã€Œæ°´ã®ä¸­ã‚’ã™ã„ã™ã„æ³³ãã€" },
                    { word: "ã‚ˆã‚ã‚ˆã‚", roman: "yo-ro-yo-ro", usage: "ä¸å®‰å®šã«æ­©ã", example: "ã€Œé…”ã£ã¦ã‚ˆã‚ã‚ˆã‚æ­©ãã€" }
                ],
                moreExamples: [
                    "ç¤¾é•·ãŒä¼šè­°å®¤ã«ï¼ˆã®ã—ã®ã—ï¼‰ã¨å…¥ã£ã¦ããŸã€‚",
                    "ï¼ˆã®ã—ã®ã—ï¼‰æ­©ãç†Šã®å§¿ãŒãƒ†ãƒ¬ãƒ“ã«æ˜ ã£ã¦ã„ãŸã€‚",
                    "å½¼ã¯ï¼ˆã®ã—ã®ã—ï¼‰ã¨ã‚¹ãƒ†ãƒ¼ã‚¸ã«å‘ã‹ã£ã¦æ­©ã„ãŸã€‚"
                ]
            },
            {
                id: 3,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€ç¬‘é¡”ã®è¡¨æƒ…ã¯ï¼Ÿã€‘",
                correct: "ã«ã“ã«ã“",
                roman: "ni-ko-ni-ko",
                options: ["ã«ã“ã«ã“", "ã«ã‚„ã«ã‚„", "ã—ã‹ã‚ã£é¢", "ã‚€ã™ã£ã¨"],
                sentence: "å¤ªéƒã¯å¤§å¥½ããªã‚±ãƒ¼ã‚­ã®å‰ã§æ€ã‚ãšï¼ˆã€€ã€€ï¼‰ã—ã¦ã—ã¾ã†ã€‚",
                sentenceHint: "æ¥½ã—ãã†ã«ç¬‘ã†æ§˜å­",
                why: "ã€Œã«ã“ã«ã“ã€ã¯ã€æ¥½ã—ãã†ã«ç¬‘ã£ã¦ã„ã‚‹æ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚è‰¯ã„æ„Ÿæƒ…ã®ç¬‘é¡”ã«ä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "æ˜ã‚‹ã„", sound: "ç„¡éŸ³", duration: "ç¶™ç¶š", mood: "æ¥½ã—ã„" },
                memoryTip: "ã€Œãƒ‹ã‚³ã€ã¯ç¬‘é¡”ã®éŸ³ï¼è¦šãˆã‚„ã™ã„ã§ã™ã­ï¼",
                others: [
                    { word: "ã«ã‚„ã«ã‚„", roman: "ni-ya-ni-ya", usage: "ä¸æ°—å‘³ã«ç¬‘ã†", example: "ã€Œã«ã‚„ã«ã‚„ç¬‘ã£ã¦ã„ã‚‹ã€" },
                    { word: "ã—ã‹ã‚ã£é¢", roman: "shi-ka-me", usage: "ä¸æº€ãªé¡”", example: "ã€Œã—ã‹ã‚ã£é¢ã‚’ã™ã‚‹ã€" },
                    { word: "ã‚€ã™ã£ã¨", roman: "mu-su-tto", usage: "ä¸æ©Ÿå«Œãªæ§˜å­", example: "ã€Œã‚€ã™ã£ã¨ã—ã¦ã„ã‚‹ã€" }
                ],
                moreExamples: [
                    "èµ¤ã¡ã‚ƒã‚“ãŒï¼ˆã«ã“ã«ã“ï¼‰ç¬‘ã£ã¦ã„ã¦ã€ã‹ã‚ã„ã‹ã£ãŸã€‚",
                    "å½¼å¥³ã¯ã„ã¤ã‚‚ï¼ˆã«ã“ã«ã“ï¼‰ã—ã¦ã„ã‚‹äººã ã€‚",
                    "ï¼ˆã«ã“ã«ã“ï¼‰ã—ãªãŒã‚‰ã€ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’é–‹ã‘ã¦ã„ãŸã€‚"
                ]
            },
            {
                id: 4,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€å…‰ã‚‹æ§˜å­ã‚’è¡¨ã™è¨€è‘‰ã¯ï¼Ÿã€‘",
                correct: "ãã‚‰ãã‚‰",
                roman: "ki-ra-ki-ra",
                options: ["ãã‚‰ãã‚‰", "ã´ã‹ã´ã‹", "ãã‚‰ãã‚‰", "ã»ã‚ã»ã‚"],
                sentence: "å¤œç©ºã®æ˜ŸãŒï¼ˆã€€ã€€ï¼‰ã¨è¼ã„ã¦ã„ãŸã€‚",
                sentenceHint: "å°ã•ãªå…‰ãŒç¾ã—ãè¼ãæ§˜å­",
                why: "ã€Œãã‚‰ãã‚‰ã€ã¯ã€å°ã•ãªå…‰ãŒç¾ã—ãè¼ãæ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚æ˜Ÿã‚„å®çŸ³ã€ç›®ã®è¼ããªã©ã«ä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "å°ã•ã„", sound: "ç„¡éŸ³", duration: "ç¶™ç¶š", mood: "ç¾ã—ã„" },
                memoryTip: "ã€Œãã‚‰ã€ã¯ã€Œå…‰ (hikari)ã€ã®éŸ³ã‹ã‚‰æ¥ã¦ã„ã¾ã™ï¼",
                others: [
                    { word: "ã´ã‹ã´ã‹", roman: "pi-ka-pi-ka", usage: "æ–°å“ã§å…‰ã£ã¦ã„ã‚‹", example: "ã€Œã´ã‹ã´ã‹ã®é´ã€" },
                    { word: "ãã‚‰ãã‚‰", roman: "gi-ra-gi-ra", usage: "å¼·ã™ãã‚‹å…‰", example: "ã€Œå¤ªé™½ãŒãã‚‰ãã‚‰ã—ã¦ã„ã‚‹ã€" },
                    { word: "ã»ã‚ã»ã‚", roman: "ho-wa-ho-wa", usage: "æŸ”ã‚‰ã‹ã„å…‰", example: "ã€Œã»ã‚ã»ã‚ã—ãŸæ˜ã‹ã‚Šã€" }
                ],
                moreExamples: [
                    "å½¼å¥³ã®ç›®ãŒï¼ˆãã‚‰ãã‚‰ï¼‰ã¨è¼ã„ã¦ã„ãŸã€‚",
                    "ï¼ˆãã‚‰ãã‚‰ï¼‰ã—ãŸãƒ‰ãƒ¬ã‚¹ã‚’ç€ã¦ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã«è¡Œã£ãŸã€‚",
                    "æµ·ãŒå¤ªé™½ã®å…‰ã§ï¼ˆãã‚‰ãã‚‰ï¼‰ã—ã¦ã„ãŸã€‚"
                ]
            },
            {
                id: 5,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€å¿ƒè‡“ã®éŸ³ã¯ï¼Ÿã€‘",
                correct: "ã©ãã©ã",
                roman: "do-ki-do-ki",
                options: ["ã©ãã©ã", "ã‚ãã‚ã", "ã—ã‚“ã—ã‚“", "ã˜ã‚“ã˜ã‚“"],
                sentence: "è©¦é¨“ã®çµæœã‚’å¾…ã¤é–“ã€å¿ƒãŒï¼ˆã€€ã€€ï¼‰ã—ãŸã€‚",
                sentenceHint: "å¿ƒè‡“ãŒé€Ÿãé³´ã‚‹æ§˜å­",
                why: "ã€Œã©ãã©ãã€ã¯ã€å¿ƒè‡“ãŒé€Ÿãé³´ã‚‹æ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚ç·Šå¼µã‚„èˆˆå¥®ã—ã¦ã„ã‚‹æ™‚ã«ä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "ä¸­", sound: "å¤§ãã„", duration: "ç¶™ç¶š", mood: "ç·Šå¼µ/èˆˆå¥®" },
                memoryTip: "å¿ƒè‡“ã®éŸ³ã€Œãƒ‰ã‚¯ãƒ³ã€ã‹ã‚‰æ¥ã¦ã„ã¾ã™ï¼",
                others: [
                    { word: "ã‚ãã‚ã", roman: "wa-ku-wa-ku", usage: "æœŸå¾…ã§èˆˆå¥®", example: "ã€Œæ—…è¡ŒãŒã‚ãã‚ãã™ã‚‹ã€" },
                    { word: "ã—ã‚“ã—ã‚“", roman: "shi-n-shi-n", usage: "é™ã‹ãªæ§˜å­", example: "ã€Œã—ã‚“ã—ã‚“ã¨é™ã¾ã‚‹ã€" },
                    { word: "ã˜ã‚“ã˜ã‚“", roman: "ji-n-ji-n", usage: "ç—ºã‚Œã‚‹æ„Ÿã˜", example: "ã€Œè¶³ãŒã˜ã‚“ã˜ã‚“ã™ã‚‹ã€" }
                ],
                moreExamples: [
                    "åˆã‚ã¦ã®äººå‰ã§ã‚¹ãƒ”ãƒ¼ãƒã—ã¦ã€ï¼ˆã©ãã©ãï¼‰ã—ãŸã€‚",
                    "ï¼ˆã©ãã©ãï¼‰ã—ãªãŒã‚‰ã€å‘Šç™½ã®æ‰‹ç´™ã‚’èª­ã‚“ã ã€‚",
                    "ã‚¸ã‚§ãƒƒãƒˆã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼ã§ï¼ˆã©ãã©ãï¼‰ã—ãŸã€‚"
                ]
            },
            {
                id: 6,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€é£Ÿã¹ã‚‹éŸ³ã¯ï¼Ÿã€‘",
                correct: "ã±ãã±ã",
                roman: "pa-ku-pa-ku",
                options: ["ã±ãã±ã", "ã‚‚ãã‚‚ã", "ãºã‚ãºã‚", "ã”ãã‚Š"],
                sentence: "å­ä¾›ãŒãƒ‘ãƒ³ã‚’ï¼ˆã€€ã€€ï¼‰ã¨é£Ÿã¹ã¦ã„ãŸã€‚",
                sentenceHint: "å£ã‚’å¤§ããé–‹ã‘ã¦é£Ÿã¹ã‚‹æ§˜å­",
                why: "ã€Œã±ãã±ãã€ã¯ã€å£ã‚’å¤§ããé–‹ã‘ã¦é£Ÿã¹ã‚‹æ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚é­šã‚„å­ä¾›ãŒé£Ÿã¹ã‚‹æ™‚ã«ã‚ˆãä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "ä¸­", sound: "å¤§ãã„", duration: "ç¶™ç¶š", mood: "å…ƒæ°—" },
                memoryTip: "å£ã‚’ã€Œãƒ‘ã‚¯ãƒƒã€ã¨é–‹ã‘ã‚‹éŸ³ã‹ã‚‰ï¼",
                others: [
                    { word: "ã‚‚ãã‚‚ã", roman: "mo-gu-mo-gu", usage: "å’€åš¼ã™ã‚‹éŸ³", example: "ã€Œã‚‚ãã‚‚ãé£Ÿã¹ã‚‹ã€" },
                    { word: "ãºã‚ãºã‚", roman: "pe-ro-pe-ro", usage: "èˆã‚ã‚‹éŸ³", example: "ã€Œã‚¢ã‚¤ã‚¹ãºã‚ãºã‚ã€" },
                    { word: "ã”ãã‚Š", roman: "go-ku-ri", usage: "é£²ã¿è¾¼ã‚€éŸ³", example: "ã€Œã”ãã‚Šã¨é£²ã¿è¾¼ã‚€ã€" }
                ],
                moreExamples: [
                    "é‡‘é­šãŒã‚¨ã‚µã‚’ï¼ˆã±ãã±ãï¼‰ã¨é£Ÿã¹ã¦ã„ã‚‹ã€‚",
                    "ãŠè…¹ãŒç©ºã„ã¦ã€ã”é£¯ã‚’ï¼ˆã±ãã±ãï¼‰é£Ÿã¹ãŸã€‚",
                    "ï¼ˆã±ãã±ãï¼‰é£Ÿã¹ã‚‹å§¿ãŒã‹ã‚ã„ã‹ã£ãŸã€‚"
                ]
            },
            {
                id: 7,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€çœ ã£ã¦ã„ã‚‹æ§˜å­ã¯ï¼Ÿã€‘",
                correct: "ã™ã‚„ã™ã‚„",
                roman: "su-ya-su-ya",
                options: ["ã™ã‚„ã™ã‚„", "ãã£ã™ã‚Š", "ã†ã¨ã†ã¨", "ã­ã‚€ã­ã‚€"],
                sentence: "èµ¤ã¡ã‚ƒã‚“ãŒãƒ™ãƒƒãƒˆã§ï¼ˆã€€ã€€ï¼‰ã¨çœ ã£ã¦ã„ã‚‹ã€‚",
                sentenceHint: "æ°—æŒã¡ã‚ˆã•ãã†ã«çœ ã‚‹æ§˜å­",
                why: "ã€Œã™ã‚„ã™ã‚„ã€ã¯ã€æ°—æŒã¡ã‚ˆã•ãã†ã«çœ ã£ã¦ã„ã‚‹æ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚èµ¤ã¡ã‚ƒã‚“ã‚„å­ä¾›ã«ä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "é™ã‹", sound: "å‘¼å¸éŸ³", duration: "é•·ã„", mood: "å¹³å’Œ" },
                memoryTip: "ã€Œã™ãƒ¼ã™ãƒ¼ã€å‘¼å¸éŸ³ã‹ã‚‰æ¥ã¦ã„ã¾ã™ï¼",
                others: [
                    { word: "ãã£ã™ã‚Š", roman: "gu-ssu-ri", usage: "æ·±ãçœ ã‚‹", example: "ã€Œãã£ã™ã‚Šçœ ã‚‹ã€" },
                    { word: "ã†ã¨ã†ã¨", roman: "u-to-u-to", usage: "çœ ããªã‚Šã‹ã‘ã‚‹", example: "ã€Œã†ã¨ã†ã¨ã™ã‚‹ã€" },
                    { word: "ã­ã‚€ã­ã‚€", roman: "ne-mu-ne-mu", usage: "çœ ãŸã„æ§˜å­", example: "ã€Œã­ã‚€ã­ã‚€ã—ã¦ã„ã‚‹ã€" }
                ],
                moreExamples: [
                    "çŒ«ãŒã‚³ã‚¿ãƒ„ã§ï¼ˆã™ã‚„ã™ã‚„ï¼‰çœ ã£ã¦ã„ãŸã€‚",
                    "ï¼ˆã™ã‚„ã™ã‚„ï¼‰çœ ã‚‹å­ä¾›ã‚’è¦‹ã¦ã€å¿ƒãŒå’Œã‚“ã ã€‚",
                    "åˆå¾Œã®æˆæ¥­ã§ï¼ˆã™ã‚„ã™ã‚„ï¼‰ã—ã¦ã—ã¾ã£ãŸã€‚"
                ]
            },
            {
                id: 8,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€è§¦ã£ãŸæ„Ÿã˜ã¯ï¼Ÿã€‘",
                correct: "ã¤ã‚‹ã¤ã‚‹",
                roman: "tsu-ru-tsu-ru",
                options: ["ã¤ã‚‹ã¤ã‚‹", "ã–ã‚‰ã–ã‚‰", "ãµã‚ãµã‚", "ã”ã¤ã”ã¤"],
                sentence: "ã“ã®çŸ³ã¯è¡¨é¢ãŒï¼ˆã€€ã€€ï¼‰ã—ã¦ã„ã¦æ°—æŒã¡ã„ã„ã€‚",
                sentenceHint: "è¡¨é¢ãŒæ»‘ã‚‰ã‹ãªæ§˜å­",
                why: "ã€Œã¤ã‚‹ã¤ã‚‹ã€ã¯ã€è¡¨é¢ãŒæ»‘ã‚‰ã‹ãªæ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚è‚Œã‚„å¸ƒã€æ°·ãªã©ã«ä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "æ»‘ã‚‰ã‹", sound: "ç„¡éŸ³", duration: "çŠ¶æ…‹", mood: "æ°—æŒã¡ã„ã„" },
                memoryTip: "ã€Œã¤ã‚‹ã€ã¯ã€Œæ»‘ã‚‹ (suberu)ã€ã®éŸ³ã‹ã‚‰ï¼",
                others: [
                    { word: "ã–ã‚‰ã–ã‚‰", roman: "za-ra-za-ra", usage: "ç²—ã„è¡¨é¢", example: "ã€Œã–ã‚‰ã–ã‚‰ã—ãŸç´™ã€" },
                    { word: "ãµã‚ãµã‚", roman: "fu-wa-fu-wa", usage: "æŸ”ã‚‰ã‹ã„", example: "ã€Œãµã‚ãµã‚ã®é›²ã€" },
                    { word: "ã”ã¤ã”ã¤", roman: "go-tsu-go-tsu", usage: "ç¡¬ãã¦å‡¸å‡¹", example: "ã€Œã”ã¤ã”ã¤ã—ãŸå²©ã€" }
                ],
                moreExamples: [
                    "å½¼å¥³ã®è‚Œã¯ï¼ˆã¤ã‚‹ã¤ã‚‹ï¼‰ã§ç¾ã—ã‹ã£ãŸã€‚",
                    "ï¼ˆã¤ã‚‹ã¤ã‚‹ï¼‰ã®æ°·ã‚’ãªã‚ãŸã€‚",
                    "æ–°ã—ã„ã‚¹ãƒãƒ›ã®ç”»é¢ã¯ï¼ˆã¤ã‚‹ã¤ã‚‹ï¼‰ã—ã¦ã„ã‚‹ã€‚"
                ]
            },
            {
                id: 9,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€æ³£ã„ã¦ã„ã‚‹æ§˜å­ã¯ï¼Ÿã€‘",
                correct: "ã—ãã—ã",
                roman: "shi-ku-shi-ku",
                options: ["ã—ãã—ã", "ã‚ã‚“ã‚ã‚“", "ã‚ãã‚ã", "å·æ³£"],
                sentence: "å½¼å¥³ã¯ corner ã§ï¼ˆã€€ã€€ï¼‰ã¨æ³£ã„ã¦ã„ãŸã€‚",
                sentenceHint: "å°ã•ãæ³£ãæ§˜å­",
                why: "ã€Œã—ãã—ãã€ã¯ã€å°ã•ãæ³£ãæ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚æ‚²ã—ã„æ™‚ã‚„æ‚”ã—ã„æ™‚ã«ä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "å°ã•ã„", sound: "æ³£ãå£°", duration: "ç¶™ç¶š", mood: "æ‚²ã—ã„" },
                memoryTip: "ã€Œã—ãã€ã¯å°ã•ãªæ³£ãå£°ã®éŸ³ï¼",
                others: [
                    { word: "ã‚ã‚“ã‚ã‚“", roman: "wa-n-wa-n", usage: "å¤§ããæ³£ã", example: "ã€Œã‚ã‚“ã‚ã‚“æ³£ãã€" },
                    { word: "ã‚ãã‚ã", roman: "me-so-me-so", usage: "æ³£ããã†ãªæ§˜å­", example: "ã€Œã‚ãã‚ãã—ã¦ã„ã‚‹ã€" },
                    { word: "å·æ³£", roman: "go-u-kyu-u", usage: "æ¿€ã—ãæ³£ã", example: "ã€Œå·æ³£ã™ã‚‹ã€" }
                ],
                moreExamples: [
                    "å­ä¾›ãŒï¼ˆã—ãã—ãï¼‰æ³£ã„ã¦ã„ã‚‹å£°ãŒèã“ãˆãŸã€‚",
                    "ï¼ˆã—ãã—ãï¼‰æ³£ããªãŒã‚‰ã€è©±ã‚’ã—ã¦ã„ãŸã€‚",
                    "æ‚”ã—ãã¦ï¼ˆã—ãã—ãï¼‰ã—ã¦ã—ã¾ã£ãŸã€‚"
                ]
            },
            {
                id: 10,
                image: "https://image.qwenlm.ai/public_source/90fae2a1-9e2a-4f48-82bf-14605299d948/16254784f-9347-453d-83e4-3a92bae6d854.png",
                question: "ã€èµ°ã£ã¦ã„ã‚‹æ§˜å­ã¯ï¼Ÿã€‘",
                correct: "ã™ã„ã™ã„",
                roman: "su-i-su-i",
                options: ["ã™ã„ã™ã„", "ã®ã‚ã®ã‚", "ã‚ˆã¡ã‚ˆã¡", "ã‚¹ã‚¿ã‚¹ã‚¿"],
                sentence: "é­šãŒæ°´ã®ä¸­ã‚’ï¼ˆã€€ã€€ï¼‰ã¨æ³³ã„ã§ã„ã£ãŸã€‚",
                sentenceHint: "è»½ã‚„ã‹ã«é€Ÿãé€²ã‚€æ§˜å­",
                why: "ã€Œã™ã„ã™ã„ã€ã¯ã€è»½ã‚„ã‹ã«é€Ÿãé€²ã‚€æ§˜å­ã‚’è¡¨ã—ã¾ã™ã€‚æ°´ã®ä¸­ã‚„ã‚¹ãƒ ãƒ¼ã‚ºãªå‹•ãã«ä½¿ã„ã¾ã™ã€‚",
                keyPoints: { strength: "é€Ÿã„", sound: "ç„¡éŸ³", duration: "ç¶™ç¶š", mood: "è»½ã‚„ã‹" },
                memoryTip: "ã€Œã™ã„ã€ã¯ã€Œæ°´ (mizu)ã€â†’ æ°´ã®ã‚ˆã†ã«æµã‚Œã‚‹ï¼",
                others: [
                    { word: "ã®ã‚ã®ã‚", roman: "no-ro-no-ro", usage: "ã¨ã¦ã‚‚é…ã„", example: "ã€Œã®ã‚ã®ã‚é€²ã‚€ã€" },
                    { word: "ã‚ˆã¡ã‚ˆã¡", roman: "yo-chi-yo-chi", usage: "èµ¤ã¡ã‚ƒã‚“ã®æ­©ãæ–¹", example: "ã€Œã‚ˆã¡ã‚ˆã¡æ­©ãã€" },
                    { word: "ã‚¹ã‚¿ã‚¹ã‚¿", roman: "su-ta-su-ta", usage: "è»½å¿«ã«æ­©ã", example: "ã€Œã‚¹ã‚¿ã‚¹ã‚¿æ­©ãã€" }
                ],
                moreExamples: [
                    "å½¼ã¯æ°´ã‚’é£²ã‚“ã§ã€ï¼ˆã™ã„ã™ã„ï¼‰èµ°ã‚Šå‡ºã—ãŸã€‚",
                    "ï¼ˆã™ã„ã™ã„ï¼‰ã¨ä»•äº‹ã‚’ã“ãªã—ã¦ã„ãã€‚",
                    "è‡ªè»¢è»Šã§ï¼ˆã™ã„ã™ã„ï¼‰å‚ã‚’ä¸‹ã£ãŸã€‚"
                ]
            }
        ];

        // Game State
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let wrongAnswers = [];
        let timeLeft = 30;
        let timerInterval = null;
        let answerRevealed = false;

        function goToScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');

            const screenOrder = ['homeScreen', 'quizScreen', 'feedbackScreen', 'resultsScreen'];
            const screenIndex = screenOrder.indexOf(screenId);

            document.querySelectorAll('.nav-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === screenIndex);
            });

            document.getElementById('screenIndicator').textContent = `${screenIndex + 1}/4`;
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            wrongAnswers = [];
            goToScreen('quizScreen');
            loadQuestion();
        }

        function loadQuestion() {
            const q = questions[currentQuestionIndex];
            answerRevealed = false;

            document.getElementById('quizProgress').textContent = `Q${currentQuestionIndex + 1}/10`;
            document.getElementById('quizProgressText').textContent = `${currentQuestionIndex + 1}/10`;
            document.getElementById('quizProgressBar').style.width = `${(currentQuestionIndex + 1) * 10}%`;
            document.getElementById('questionText').textContent = q.question;
            document.getElementById('questionImage').src = q.image;

            // Generate fill-in-the-blank sentence
            const sentenceHtml = q.sentence.replace('ï¼ˆã€€ã€€ï¼‰',
                `<span class="blank-space" id="blankSpace" onclick="revealAnswer()">ï¼Ÿ</span>`
            );
            document.getElementById('sentenceText').innerHTML = sentenceHtml;
            document.getElementById('revealBtn').disabled = false;
            document.getElementById('revealBtn').textContent = 'ç­”ãˆã‚’è¡¨ç¤º';

            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            const letters = ['A', 'B', 'C', 'D'];
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = `
                    <span class="option-letter">${letters[index]}.</span>
                    <span class="option-word">${opt}</span>
                `;
                btn.onclick = () => selectOption(btn, opt === q.correct);
                optionsContainer.appendChild(btn);
            });

            timeLeft = 30;
            updateTimer();
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    autoFail();
                }
            }, 1000);
        }

        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent =
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function revealAnswer() {
            if (answerRevealed) return;

            const q = questions[currentQuestionIndex];
            const blankSpace = document.getElementById('blankSpace');

            if (blankSpace) {
                blankSpace.textContent = q.correct;
                blankSpace.classList.add('revealed');
            }

            document.getElementById('revealBtn').disabled = true;
            document.getElementById('revealBtn').textContent = 'ç­”ãˆè¡¨ç¤ºæ¸ˆã¿';
            answerRevealed = true;
        }

        function selectOption(btn, isCorrect) {
            if (timerInterval) clearInterval(timerInterval);

            document.querySelectorAll('.option-btn').forEach(option => {
                option.style.pointerEvents = 'none';
            });

            const q = questions[currentQuestionIndex];

            if (isCorrect) {
                btn.classList.add('correct');
                correctAnswers++;
                score += 100 + Math.floor(timeLeft * 2);
            } else {
                btn.classList.add('incorrect');
                wrongAnswers.push(q.correct);
                document.querySelectorAll('.option-btn').forEach(option => {
                    if (option.querySelector('.option-word').textContent === q.correct) {
                        option.classList.add('correct');
                    }
                });
            }

            setTimeout(() => {
                showFeedback(isCorrect);
            }, 1000);
        }

        function autoFail() {
            document.querySelectorAll('.option-btn').forEach(option => {
                option.style.pointerEvents = 'none';
                option.classList.add('incorrect');
            });

            const q = questions[currentQuestionIndex];
            document.querySelectorAll('.option-btn').forEach(option => {
                if (option.querySelector('.option-word').textContent === q.correct) {
                    option.classList.add('correct');
                }
            });

            wrongAnswers.push(q.correct);
            setTimeout(() => {
                showFeedback(false);
            }, 1500);
        }

        function showFeedback(isCorrect) {
            const q = questions[currentQuestionIndex];

            document.getElementById('feedbackProgress').textContent = `Q${currentQuestionIndex + 1}/10`;
            document.getElementById('feedbackGems').textContent = Math.floor(score / 50);
            document.getElementById('feedbackEmoji').textContent = isCorrect ? 'ğŸ‰' : 'ğŸ˜¢';
            document.getElementById('feedbackTitle').textContent = isCorrect ? 'æ­£è§£ï¼' : 'æ®‹å¿µ...';
            document.getElementById('feedbackTitle').className = `feedback-title ${isCorrect ? 'correct' : 'incorrect'}`;
            document.getElementById('feedbackSubtitle').textContent = isCorrect ?
                'ç´ æ™´ã‚‰ã—ã„ï¼ã“ã®èª¿å­ã§ç¶šã‘ã¾ã—ã‚‡ã†' : 'è§£èª¬ã‚’èª­ã‚“ã§è¦šãˆã¾ã—ã‚‡ã†ï¼';
            document.getElementById('feedbackWord').textContent = `âœ¨ ${q.correct}`;
            document.getElementById('feedbackRoman').textContent = `[${q.roman}]`;
            document.getElementById('whyExplanation').textContent = q.why;
            document.getElementById('memoryTip').textContent = q.memoryTip;

            // Complete sentence
            const completeSentenceHtml = q.sentence.replace('ï¼ˆã€€ã€€ï¼‰',
                `<span class="filled-word">${q.correct}</span>`
            );
            document.getElementById('completeSentence').innerHTML = completeSentenceHtml;

            // Key points
            const keyPointsHtml = `
                <div class="key-point">
                    <div class="key-point-label">å¼·ã•</div>
                    <div class="key-point-value">${q.keyPoints.strength}</div>
                </div>
                <div class="key-point">
                    <div class="key-point-label">éŸ³</div>
                    <div class="key-point-value">${q.keyPoints.sound}</div>
                </div>
                <div class="key-point">
                    <div class="key-point-label">æ™‚é–“</div>
                    <div class="key-point-value">${q.keyPoints.duration}</div>
                </div>
                <div class="key-point">
                    <div class="key-point-label">é›°å›²æ°—</div>
                    <div class="key-point-value">${q.keyPoints.mood}</div>
                </div>
            `;
            document.getElementById('whyKeyPoints').innerHTML = keyPointsHtml;

            // Other options
            const otherOptionsHtml = q.others.map(opt => `
                <div class="option-detail-card">
                    <div class="option-detail-header">
                        <span class="option-detail-word">âŒ ${opt.word}</span>
                        <span class="option-detail-roman">[${opt.roman}]</span>
                    </div>
                    <div class="option-detail-usage">${opt.usage}</div>
                    <div class="option-detail-example">ğŸ’¬ ${opt.example}</div>
                </div>
            `).join('');
            document.getElementById('otherOptionsContent').innerHTML = otherOptionsHtml;

            // More examples
            const moreExamplesHtml = `
                <div class="example-title">ğŸ“š ã•ã‚‰ã«ä¾‹æ–‡</div>
                ${q.moreExamples.map(ex => `
                    <div class="example-item">
                        ${ex.replace(q.correct, `<span class="example-highlight">${q.correct}</span>`)}
                    </div>
                `).join('')}
            `;
            document.getElementById('exampleSentencesContent').innerHTML = moreExamplesHtml;

            if (isCorrect) {
                createConfetti();
            }

            // Reset tabs
            switchTab('why');

            goToScreen('feedbackScreen');
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            document.querySelector(`.tab-btn[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        function nextQuestion() {
            currentQuestionIndex++;

            if (currentQuestionIndex >= questions.length) {
                showResults();
            } else {
                goToScreen('quizScreen');
                loadQuestion();
            }
        }

        function showResults() {
            const percentage = Math.round((correctAnswers / questions.length) * 100);

            document.getElementById('resultsEmoji').textContent = percentage >= 80 ? 'ğŸ†' : percentage >= 50 ? 'ğŸ‘' : 'ğŸ“š';
            document.getElementById('resultsTitle').textContent = percentage >= 80 ? 'ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼' : percentage >= 50 ? 'ã‚‚ã†ä¸€æ¯ï¼' : 'å¾©ç¿’ã—ã¾ã—ã‚‡ã†ï¼';
            document.getElementById('resultsScore').textContent = `${correctAnswers}/${questions.length}`;
            document.getElementById('resultsSubtitle').textContent = `æ­£è§£ç‡ ${percentage}% - ${percentage >= 80 ? 'ç´ æ™´ã‚‰ã—ã„ï¼' : percentage >= 50 ? 'ã‚ˆãã§ãã¾ã—ãŸï¼' : 'é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼'}`;
            document.getElementById('statCorrect').textContent = correctAnswers;
            document.getElementById('statScore').textContent = score;
            document.getElementById('resultGems').textContent = Math.floor(score / 50);

            const reviewHtml = wrongAnswers.map(word => `
                <div class="review-item">
                    <span class="review-word">${word}</span>
                    <span class="review-status">âŒ è¦å¾©ç¿’</span>
                </div>
            `).join('') || '<div class="review-item"><span class="review-word">ğŸ‰ å…¨ã¦æ­£è§£ï¼</span></div>';
            document.getElementById('reviewListContent').innerHTML = reviewHtml;

            // Update home screen stats
            const currentBest = parseInt(document.getElementById('homeBestScore').textContent) || 0;
            if (score > currentBest) {
                document.getElementById('homeBestScore').textContent = `${score}ç‚¹`;
            }

            goToScreen('resultsScreen');
        }

        function createConfetti() {
            const colors = ['#2ECC71', '#F39C12', '#E74C3C', '#4A90E2', '#9B59B6', '#F1C40F'];

            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.getElementById('feedbackScreen').appendChild(confetti);

                    setTimeout(() => confetti.remove(), 2000);
                }, i * 30);
            }
        }

        // Initialize
        document.querySelectorAll('.tab-item').forEach(tab => {
            tab.addEventListener('click', function () {
                const parent = this.parentElement;
                parent.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>

</html>